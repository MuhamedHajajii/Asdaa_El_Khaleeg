<p-card header="إضافة مقال جديد" class="p-mb-3">
  <form [formGroup]="addArticleForm" (ngSubmit)="onSubmit()">
    <!-- Image Upload with Drag and Drop -->
    <div class="p-field mb-3">
      <p-fileUpload
        name="post_image"
        url=""
        accept="image/*"
        (onSelect)="onFileSelect($event)"
        [auto]="true"
        [chooseLabel]="'اختر صورة'"
        [uploadLabel]="'رفع'"
        [cancelLabel]="'إلغاء'"
        [showUploadButton]="true"
        [showCancelButton]="true"
        [customUpload]="true"
        (onUpload)="onUpload($event)"
        [draggable]="true"
      ></p-fileUpload>
    </div>

    <!-- Title Input -->
    <div class="p-field">
      <input
        id="post_title"
        type="text"
        pInputText
        formControlName="post_title"
        placeholder="أدخل عنوان المقال"
        class="p-inputtext-lg"
      />
    </div>

    <!-- Author Dropdown -->
    <div class="p-field">
      <p-dropdown
        [options]="authors"
        formControlName="author_name"
        placeholder="اختر اسم الكاتب"
        [filter]="true"
        [filterBy]="'label'"
        optionLabel="label"
        appendTo="body"
        styleClass="w-full"
      >
        <ng-template let-author pTemplate="item">
          <div>
            {{ author.label }}
          </div>
        </ng-template>
      </p-dropdown>
    </div>

    <!-- Date Input -->
    <div class="my-3 position-relative">
      <ngx-hijri-datepicker
        [(value)]="selectedHijriDate"
        [locale]="'ar-SA'"
        [storageLocale]="'en'"
        [placeholder]="'اختر تاريخ'"
        [width]="'100%'"
        class="mb-0"
        [InputColor]="'#000'"
        [IconColor]="'#fff'"
        (valueChange)="onDateSelected($event)"
      ></ngx-hijri-datepicker>
    </div>

    <!-- Content Editor -->
    <div class="p-field mb-3">
      <ngx-jodit [(value)]="value" [options]="options" #ngxJodit></ngx-jodit>
    </div>

    <!-- Preview Button -->
    <div class="p-field mb-3">
      <button
        pButton
        type="button"
        label="عرض المقال"
        (click)="previewArticle()"
      ></button>
    </div>

    <!-- Submit Button -->
    <div class="p-field">
      <button
        pButton
        type="submit"
        label="نشر المقال"
        [disabled]="!addArticleForm.valid"
      ></button>
    </div>
  </form>
</p-card>

<!-- Preview Section -->
<p-card *ngIf="isPreview" header="معاينة المقال">
  <h3>{{ addArticleForm.value.post_title }}</h3>
  <p><strong>الكاتب:</strong> {{ addArticleForm.value.author_name }}</p>
  <p><strong>التاريخ:</strong> {{ addArticleForm.value.post_date }}</p>
  <div [innerHTML]="articleContent"></div>
</p-card>
